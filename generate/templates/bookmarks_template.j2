{#         --- Create a bookmark entry ---          #}
{% macro make_bookmark(name, content) %}
                <DT><A HREF="{{ content.url }}" ADD_DATE="{{ now }}">{{ name }}</A>
{% endmacro %}
{#         --- Create a bookmarks entries contained in subtable ---          #}
{% macro process_subtable(content) %}
{% for name,bookmark in content.items() %}
{% if bookmark is mapping %}
                    <DT><A HREF="{{ bookmark.url }}" ADD_DATE="{{ now }}">{{ name }}</A>
{% endif %}
{% endfor %}
{% endmacro %}
{#         --- Create bookmarks or folders aiming to contain bookmarks entry for subtable ---          #}
{% macro process_table(table) %}
{%- for lg_dict in table.values() %}
{% if lg_dict is mapping %}
{%- for elmtname,content in lg_dict.items() %}
{% if 'subtable' in elmtname %}
                <DT><H3 ADD_DATE="{{ now }}">{{ content.sub_title }}</H3>
                <DL><p>
{{ process_subtable(content) -}}
            {{ "                </DL><p>" }}
{% else %}
{{ make_bookmark(elmtname, content) -}}
{% endif -%}
{% endfor -%}
{% endif -%}
{% endfor -%}
{% endmacro %}
{#         --- Create subsection folders ---          #}
{% macro process_section_content(section) %}
{% for subsection_title, subsection_content in section.items() %}
            <DT><H3 ADD_DATE="{{ now }}">{{ subsection_title }}</H3>
            <DL><p>
{{ process_table(subsection_content) -}}
                {{ "            </DL><p>" }}
{% endfor %}
{% endmacro %}
{#         --- Create section folder ---          #}
{% macro process_section(section_name, section) %}
        <DT><H3 ADD_DATE="{{ now }}">{{ section_name }}</H3>
        <DL><p>
{{ process_section_content(section) -}}
            {{ "        </DL><p>" }}
{% endmacro %}
{#         --- Beginning of template ---          #}
<!DOCTYPE NETSCAPE-Bookmark-file-1>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks Menu</H1>

<DL><p>
    <DT><H3 ADD_DATE="{{ now }}" LAST_MODIFIED="{{ now }}">Pentester Toolbar</H3>
    <DL><p>
{{ process_section("Security News", News) -}}
{{ process_section("Forums", Forums) -}}
{{ process_section("Learning resources", Learning) -}}
{{ process_section("Practicing resources", Practicing) -}}
{{ process_section("Redteaming and pentesting", Redteam) -}}
{{ process_section("Other awesome lists", Awesome) }}
    </DL><p>
</DL>